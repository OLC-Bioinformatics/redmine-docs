<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kma - OLC Redmine Automator</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Kma";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OLC Redmine Automator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../getting_started/">Getting started</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../troubleshooting/">Troubleshooting</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Analysis</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../amrsummary/">Amrsummary</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../autoclark/">Autoclark</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../bcgtree/">Bcgtree</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cardrgi/">Cardrgi</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../closerelatives/">Closerelatives</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../confindr/">Confindr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../cowsnphr/">Cowsnphr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../diversitree/">Diversitree</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../drep/">Drep</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../eCGF/">eCGF</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ectyper/">Ectyper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fastqc/">Fastqc</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../geneseekr/">Geneseekr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../intimintyper/">Intimintyper</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Kma</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#kma-gene-detection">KMA - Gene Detection</a></li>
                
                    <li><a class="toctree-l4" href="#what-does-it-do">What does it do?</a></li>
                
                    <li><a class="toctree-l4" href="#how-do-i-use-it">How do I use it?</a></li>
                
                    <li><a class="toctree-l4" href="#how-long-does-it-take">How long does it take?</a></li>
                
                    <li><a class="toctree-l4" href="#what-can-go-wrong">What can go wrong?</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../kraken2/">Kraken2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../mashtree/">Mashtree</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../metaphlan/">Metaphlan</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../mobsuite/">Mobsuite</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../neartree/">Neartree</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../plasmidborneidentity/">Plasmidborneidentity</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pointfinder/">Pointfinder</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../primerfinder/">Primerfinder</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../prokka/">Prokka</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../psortb/">Psortb</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pyseer/">Pyseer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../resfinder/">Resfinder</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../roary/">Roary</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sequence_extractor/">Sequence extractor</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sipprverse/">Sipprverse</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../snvphyl/">Snvphyl</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../staramr/">Staramr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../strainmash/">Strainmash</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../wgsassembly/">Wgsassembly</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Data</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data/external_retrieve/">External retrieve</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data/report_retrieve/">Report retrieve</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../data/sra_upload/">Sra upload</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/create_environment/">Create environment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/create_pages/">Create pages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/edit_pages/">Edit pages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/publish_changes/">Publish changes</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Internal only</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../internal_only/merge/">Merge</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OLC Redmine Automator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Analysis &raquo;</li>
        
      
    
    <li>Kma</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/OLC-LOC-Bioinformatics/OLCRedmineAutomator" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="kma-gene-detection">KMA - Gene Detection</h1>
<h3 id="what-does-it-do">What does it do?</h3>
<p>KMA (k-mer alignment) is a program developed by the Center for Genomic Epidemiology (CGE) to align gene targets to sequence assemblies or raw-reads. This redmine automator tool currently allows analysis for antimicrobial, biocide, and metal resistance, or a custom set of user targets in sequence data.</p>
<p>For more information, see the <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-018-2336-6">KMA publication</a>, and/or the <a href="https://cge.food.dtu.dk/services/KmerResistance/">CGE website</a>.</p>
<p>If you publish data using this automator, don't forget to cite the authors of the tool <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-018-2336-6">Clausen et al., 2018</a></p>
<h3 id="how-do-i-use-it">How do I use it?</h3>
<h4 id="subject">Subject</h4>
<p>In the <code>Subject</code> field, put <code>kma</code>. Spelling counts, but case sensitivity doesn't.</p>
<h4 id="description">Description</h4>
<p><strong>Required Components</strong></p>
<p>The first line of the description should be the analysis you would like to run (e.g. <code>analysis=amr</code>). This will depend on the type of sequence data your are investigating.</p>
<ul>
<li>The following options are currently supported:<ul>
<li><code>amr</code> - used for antimicrobial resistance gene detection</li>
<li><code>biocide</code> - used for biocide resistance gene detection</li>
<li><code>metal</code> - used for metal resistance gene detection</li>
<li><code>bacmet</code> - used for metal resistance gene detection using the <a href="http://bacmet.biomedicine.gu.se/">BacMet database</a>, which was converted to nucleotide format by James Robertson (reference to follow)</li>
<li><code>custom</code> - gene detection using a custom target database uploaded by the user. The attached file <strong>MUST</strong> be named <code>targets.fasta</code>. The output csv file will use your fasta-file gene headers as names.
<br></li>
</ul>
</li>
<li>Bacterial Integrative and Conjugative Elements (ICEs) <a href="https://bioinfo-mml.sjtu.edu.cn/ICEberg2/download.html">ICEberg databases</a> from the <a href="https://academic.oup.com/nar/article/47/D1/D660/5165266">ICEfinder publication</a>:
<em>the ICEfinder webtool seems to work differently than KMA, and may detect ICEs where KMA does not</em><ul>
<li><code>all_ices</code> - used for all ICE gene detection</li>
<li><code>aice</code> - used for actinomycete (AICEs) type ICE gene detection</li>
<li><code>cime</code> - used for cis-mobilizable elements (CIMEs) ICE gene detection</li>
<li><code>ime</code> - used for Integrative and Mobilizable Elements (IME) type ICE gene detection</li>
<li><code>t4ss</code> - used for Type IV Secretion System (T4SS) type ICE gene detection</li>
</ul>
</li>
</ul>
<p>You must also include a list of SEQIDs one per line.</p>
<p><strong>Optional Components</strong></p>
<p>By default, KMA will run the analysis for isolate assemblies. In order to customise your CARD-RGI analyses, additional settings can be optionally modified:</p>
<ul>
<li>
<p><strong>seqtype</strong> - the default analysis will use genome assemblies.</p>
<ul>
<li>default is <code>fasta</code> </li>
<li>If you want to analyse raw-read data, add the following line:<ul>
<li><code>seqtype=fastq</code></li>
<li><code>seqtype=minionfastq</code></li>
</ul>
</li>
<li>Note: seqtype for minion raw-reads is slightly different, as KMA uses different commands for paired-end (illumina) and single-end (nanopore) data</li>
</ul>
</li>
<li>
<p><strong>nanopore</strong> - the default analysis will be for short-read Illumina data. <strong>This function is for assemblies</strong></p>
<ul>
<li>default is <code>False</code> </li>
<li>If you want to analyse long-read Nanopore data, add a line to your description:<ul>
<li><code>nanopore=TRUE</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>readcount</strong> - the default analysis will only output a csv file containing information on matching target gene(s) presence including template identity, coverage, depth, etc. This flag will output read-mapping data for your targets. <strong>This function is best used with raw-reads - Assembly analysis will likely only report 1 read mapping to each gene-target</strong></p>
<ul>
<li>default is <code>False</code> </li>
<li>If you want the analysis to output a file including information on the number of reads in your sequence mapping to each database-target, add a line to your description:<ul>
<li><code>readcount=TRUE</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="example">Example</h4>
<p>For an example KMA analysis, see <a href="https://redmine.biodiversity.agr.gc.ca/issues/28117">issue 28117</a>. The zip file has been attached to this request as an example (the ftp links expire after approx. 2 weeks).</p>
<h4 id="interpreting-results">Interpreting Results</h4>
<p>KMA will upload a zipped folder called <code>kma_output_redmineID.zip</code> to the ftp once it has completed. This will contain a  kma_output.csv file with the target-hits/results for all of the sequences requested in the analysis. Just because a gene/resistance is listed here does not necessarily mean the strain carries that resistance - it's important
to look at the <strong>Template_Identity</strong> and <strong>Template_Coverage</strong> columns. You can be pretty sure that anything with 100 for both
is actually there, but anything else requires further analysis to be sure.</p>
<h4 id="databases-provided-with-the-automator">Databases Provided with the Automator</h4>
<p>The databases for AMR, biocide, and metal resistance were derived from the NCBI <a href="https://www.ncbi.nlm.nih.gov/pathogens/antimicrobial-resistance/AMRFinder/">AMRFinderPlus database</a>, version 3.10 downloaded on 2021-05-06. This database was then manually curated and split into separate AMR, biocide, and metal resistance databases. The following genes were added to the biocide resistance database, as they were of interest for some research projects:</p>
<pre><code>-sugE_sugE_quaternary_ammonium_compound_efflux_NC_011514.1:c6661-6344
-sugE_sugE_quaternary_ammonium_compound_efflux_NC_003197.2:4581504-4581833
-sugE_sugE_quaternary_ammonium_compound_efflux_NC_017731.1:2886005-2886319
-sugE_sugE_quaternary_ammonium_compound_efflux_NC_020418.1:c2409693-2409373
-sugE_sugE_quaternary_ammonium_compound_efflux_NC_016830.1:5098537-5098851
-sugE(p)_sugESalmonella_quaternary_ammonium_compound_efflux_NC_010259.1:c4461-4144
-sugE(c)_sugESalmonella_quaternary_ammonium_compound_efflux_NC_003198.1:4557993-4558310
-sugE(p)_sugEEcoli_quaternary_ammonium_compound_efflux_NC_019069.1:c60194-59877
-sugE(p)_sugEEcoli_quaternary_ammonium_compound_efflux_KC285365.1
-sugE(c)_sugEEcoli_quaternary_ammonium_compound_efflux_LT903847.1:c240852-240535
-bcrA_bcrABC_Listeria_benzalkonium_chloride_efflux_JX023276.1:106-645
-bcrB_bcrABC_Listeria_benzalkonium_chloride_efflux_JX023276.1:657-974
-bcrC_bcrABC_Listeria_benzalkonium_chloride_efflux_JX023276.1:992-1336
-qacH_qacH_Listeria_quaternary_ammonium_compound_efflux_HG329628.1:983-1354
-emrE_emrE_Listeria_Listeria_quaternary_ammonium_compound_resistance_NC_013768.1:1817073-1817396
-qacA_qacA_Listeria_quaternary_ammonium_compound_efflux_KC980922.1
-qacC_qacC_Listeria_quaternary_ammonium_compound_efflux_RJZ34303
-qacED1_qacED1_Acinetobacter_quaternary_ammonium_compound_efflux_KM972592.1
</code></pre>
<h3 id="how-long-does-it-take">How long does it take?</h3>
<p>KMA is very fast, however the time required for analysis will depend on the analysis type and number of sequences requested.</p>
<h3 id="what-can-go-wrong">What can go wrong?</h3>
<p>1) Requested SEQIDs are not available. If we can't find some of the SEQIDs that you request, you will get a warning message informing you of it.</p>
<p>2) A custom analysis was requested but <code>targets.fasta</code> file was not attached. You will get a warning message informing you of it.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../kraken2/" class="btn btn-neutral float-right" title="Kraken2"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../intimintyper/" class="btn btn-neutral" title="Intimintyper"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../intimintyper/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../kraken2/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
