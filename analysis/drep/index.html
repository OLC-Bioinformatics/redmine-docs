<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://olc-bioinformatics.github.io/redmine-docs/analysis/drep/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Drep - OLC Redmine Automator</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">OLC Redmine Automator</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../getting_started/">Getting started</a>
                </li>
            
            
            
                <li >
                    <a href="../../troubleshooting/">Troubleshooting</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../tutorials/create_environment/">Create environment</a>
                        </li>
                    
                        <li >
                            <a href="../../tutorials/create_pages/">Create pages</a>
                        </li>
                    
                        <li >
                            <a href="../../tutorials/edit_pages/">Edit pages</a>
                        </li>
                    
                        <li >
                            <a href="../../tutorials/publish_changes/">Publish changes</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Data <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../data/external_retrieve/">External retrieve</a>
                        </li>
                    
                        <li >
                            <a href="../../data/report_retrieve/">Report retrieve</a>
                        </li>
                    
                        <li >
                            <a href="../../data/sra_upload/">Sra upload</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Internal only <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../internal_only/merge/">Merge</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Analysis <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../amrsummary/">Amrsummary</a>
                        </li>
                    
                        <li >
                            <a href="../autoclark/">Autoclark</a>
                        </li>
                    
                        <li >
                            <a href="../bcgtree/">Bcgtree</a>
                        </li>
                    
                        <li >
                            <a href="../closerelatives/">Closerelatives</a>
                        </li>
                    
                        <li >
                            <a href="../confindr/">Confindr</a>
                        </li>
                    
                        <li >
                            <a href="../cowsnphr/">Cowsnphr</a>
                        </li>
                    
                        <li >
                            <a href="../diversitree/">Diversitree</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Drep</a>
                        </li>
                    
                        <li >
                            <a href="../eCGF/">eCGF</a>
                        </li>
                    
                        <li >
                            <a href="../ectyper/">Ectyper</a>
                        </li>
                    
                        <li >
                            <a href="../geneseekr/">Geneseekr</a>
                        </li>
                    
                        <li >
                            <a href="../intimintyper/">Intimintyper</a>
                        </li>
                    
                        <li >
                            <a href="../mobsuite/">Mobsuite</a>
                        </li>
                    
                        <li >
                            <a href="../neartree/">Neartree</a>
                        </li>
                    
                        <li >
                            <a href="../plasmidborneidentity/">Plasmidborneidentity</a>
                        </li>
                    
                        <li >
                            <a href="../pointfinder/">Pointfinder</a>
                        </li>
                    
                        <li >
                            <a href="../primerfinder/">Primerfinder</a>
                        </li>
                    
                        <li >
                            <a href="../prokka/">Prokka</a>
                        </li>
                    
                        <li >
                            <a href="../psortb/">Psortb</a>
                        </li>
                    
                        <li >
                            <a href="../pyseer/">Pyseer</a>
                        </li>
                    
                        <li >
                            <a href="../resfinder/">Resfinder</a>
                        </li>
                    
                        <li >
                            <a href="../roary/">Roary</a>
                        </li>
                    
                        <li >
                            <a href="../sipprverse/">Sipprverse</a>
                        </li>
                    
                        <li >
                            <a href="../snvphyl/">Snvphyl</a>
                        </li>
                    
                        <li >
                            <a href="../staramr/">Staramr</a>
                        </li>
                    
                        <li >
                            <a href="../strainmash/">Strainmash</a>
                        </li>
                    
                        <li >
                            <a href="../wgsassembly/">Wgsassembly</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../diversitree/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../eCGF/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#drep">dRep</a></li>
        
            <li><a href="#what-does-it-do">What does it do?</a></li>
        
            <li><a href="#how-do-i-use-it">How do I use it?</a></li>
        
            <li><a href="#how-long-does-it-take">How long does it take?</a></li>
        
            <li><a href="#what-can-go-wrong">What can go wrong?</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="drep">dRep</h1>
<h3 id="what-does-it-do">What does it do?</h3>
<p><a href="https://drep.readthedocs.io/en/latest/overview.html">dRep</a>, developed by Matt Olm, is used to compare genomes and determine relatedness in the form of average nucleotide identity (ANI).
Optionally, it can be used to dreplicate genomes.</p>
<p>For more information, see the <a href="https://www.nature.com/articles/ismej2017126">dRep publication</a>. If you publish data using this automator, don't forget to cite the authors of the tool <a href="https://www.nature.com/articles/ismej2017126">Olm et al., 2017</a></p>
<h3 id="how-do-i-use-it">How do I use it?</h3>
<h4 id="subject">Subject</h4>
<p>In the <code>Subject</code> field, put <code>drep</code>. Spelling counts, but case sensitivity doesn't.</p>
<h4 id="description">Description</h4>
<p><strong>Required Components</strong></p>
<p>The first line of the description should be the analysis you would like to run (e.g. <code>analysis=custom</code>). </p>
<ul>
<li>The following options are currently supported:<ul>
<li><code>custom</code> - compare only the SEQIDs listed in the description</li>
<li><code>enterobacterales</code> - compare the listed SEQIDs to a set of reference sequences for species from the order Enterobacterales</li>
<li><code>listeriaceae</code> - compare the listed SEQIDs to a set of reference sequences for species from the family Listeriaceae</li>
</ul>
</li>
</ul>
<p>You must also include a list of SEQIDs one per line.</p>
<p><strong>Optional Components</strong></p>
<p>By default, dRep will run the compare command to compare the set of genomes. In order to customise your dRep analyses, several settings can be optionally modified</p>
<ul>
<li>
<p>MASH ANI cutoff - this value is important, as only sequences clustering within this 'relatedness' threshold will be analysed using the secondary ANI algorithm (which is what determines the ANI values)</p>
<ul>
<li>default is <code>0.9</code> (90%) </li>
<li>If you want to use custom cutoffs for MASH clustering, add a line to your description:<ul>
<li><code>mash_ANI_threshold=0.8</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Secondary clustering cutoff</p>
<ul>
<li>default is <code>0.99</code> (99%) </li>
<li>modify as follows:<ul>
<li><code>S_ANI=0.9</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>coverage threshold (minimum overlap between genomes when doing secondary comparisons)</p>
<ul>
<li>default is <code>0.1</code> (10%) </li>
<li>modify as follows:<ul>
<li><code>coverage_threshold=0.2</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>cluster algorithm </p>
<ul>
<li>default is <code>average</code> </li>
<li>modify as follows:<ul>
<li><code>clusteralgorithm=ward</code></li>
</ul>
</li>
<li>available algorithms include:<ul>
<li><code>median</code>, <code>weighted</code>, <code>single</code>, <code>complete</code>, <code>average</code>, <code>ward</code>, <code>centroid</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>comparison algorithm </p>
<ul>
<li>default is <code>ANImf</code> </li>
<li>modify as follows:<ul>
<li><code>comparisonalgorithm=fastANI</code></li>
</ul>
</li>
<li>available algorithms include:<ul>
<li><code>fastANI</code>, <code>ANImf</code>, <code>ANIn</code>, <code>gANI</code>, <code>goANI</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>command type (compare genomes for ANI values, or dereplicate, see <a href="https://drep.readthedocs.io/en/latest/overview.html">dRep</a>). <strong>NOTE:currently debugging this option</strong></p>
<ul>
<li>default is <code>compare</code> </li>
<li>modify as follows:<ul>
<li><code>command=dereplicate</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="example">Example</h4>
<h4 id="interpreting-results">Interpreting Results</h4>
<p>dRep will upload a zip file to the ftp on completion. This will contain folders with data in the form of tables, figures, etc. ANI values will only be output for clusters of sequences that are related at or above the MASH ANI cutoff. dRep does not output a tree file, however you should be able to replicate the output MASH tree by hierarchical clustering of the MASH table in R. (Hierarchical clustering uses the cluster algorithm command described above)</p>
<h3 id="how-long-does-it-take">How long does it take?</h3>
<p>This depends largely on the number of strains you want to compare and their relatedness. It can often be as quick as a few minutes
if you have 10 or less strains, or take several hours for more strains. The primary clustering step uses Mash to determine whether sequences are likely related (based on provided cutoff or default 90%). </p>
<p>The secondary analysis which calculates the ANI values is only completed on sets of genomes that have at least 90% Mash ANI (unless this cutoff is modified). These secondary comparisons are slower (more sensitive and accurate for ANI). Therefore, if you have a large number of closely related genomes your job may take longer to complete.</p>
<h3 id="what-can-go-wrong">What can go wrong?</h3>
<p>A few things can go wrong with this process:</p>
<p>1) Requested SEQIDs are not available. If we can't find some of the SEQIDs that you request, you will get a warning
message informing you of it.</p>
<p>2) You did not provide an analysis type. Custom analysis only completes dRep compare for the SEQ-IDs listed, whereas enterobacterales will compare your listed sequences to reference sequences from the order Enterobacterales, and listeriaceae will compare your listed sequences to reference sequences from the family Listeriaceae.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>